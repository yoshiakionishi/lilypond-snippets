%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%


\chapter {Time Signatures}

First nine entries of this chapter discuss fractional time signatures (variants of the irrational time signatures) and their compound forms. I have been inspired to create these implementations after chancing upon the email exchanges on \verb|lilypond-user| dated from 2014.\footnote{See: \url{https://lists.gnu.org/archive/html/lilypond-user/2014-06/msg00209.html}. However, in the process of writing this documentation I have come across another email thread on the same mailing list: \url{https://mail.gnu.org/archive/html/lilypond-user/2020-04/msg00423.html} }

While Gould discourages the use of time signatures with numerators as fractions,\autocite[180]{RN1741} there are cases where the use of such time signatures seems justified, particularly when the fractions deal with some form of tuplets. This is a form of time signature notation widely seen in works by Chaya Czernowin, Stefan Beyer, myself, and so many others.

I present the implementation of fractional time signatures in three different styles, A, B, and C. There are implementations for compound meters for each of the styles, in two and three time signatures. 


\section {Fractional Time Signatures, Style A}
\label{sec:time_signatures}
\hfill
\lilypondfile[staffsize=24,hpadding=4,voffset=4pt]{/fractionalTimeSignatureA.ly}
\hfill

\subsection{Description}
This particular style of fractional time signatures\footnote{After having come up with this code, there were other implementations that could be seen on this email thread: \url{https://mail.gnu.org/archive/html/lilypond-user/2020-04/msg00423.html}} can be seen in scores by Stefan Beyer, for example \textit{Marsch} (2013-14),\autocite{RN1745} \textit{Mittel und Zwecke (Boulevard)} (2014),\autocite{RN1744} \textit{Bleib hier. Schau zu. Mach kein GerÃ¤usch.} (2017),\autocite{RN1743} and \textit{Most of My Clients Come Back} (2012-13).\autocite{RN1747} In the case of \textit{Mass und Gewicht} (2021), Beyer uses fractions on the denominator of the time signatures.\footnote{It would be relatively easy to modify the Scheme code so that the fraction appears next to the denominator of the time signature, instead.}

Because the size the fractions is a half of the ordinary time signatures, it may be difficult to see from afar.\footnote{It should be noted that in other works such as \textit{Lotte Reiniger's The Sleeping Beauty} (2020-21), Beyer also uses the irrational time signatures as seen in the \hyperref[sec:incompleteTuplet]{\textit{Incomplete Tuplet Bracket for Irrational Time Signatures}} section of this document.} 
\label{sec:time_signatures_styleA_convention}

\subsection{Grammar}
\begin{verbatim}
\fractionalTimeSignatureA 
       #'(NUM1 NUM2 NUM3 NUM4) MEASURE_SPAN BEAT_STRUCT
\fractionalTimeSignatureA 
       #'(NUM2 NUM3 NUM4) MEASURE_SPAN BEAT_STRUCT
\fractionalTimeSignatureAPlus 
       #'(NUM1 NUM2 NUM3 NUM4) MEASURE_SPAN BEAT_STRUCT
\fractionalTimeSignatureAPlus 
       #'(NUM2 NUM3 NUM4) MEASURE_SPAN BEAT_STRUCT

\backToNormalTimeSignature

\end{verbatim}
\textbf{NB} 
\begin{enumerate}
\item \verb|\fractionalTimeSignatureA| lists time signatures \textit{without} the use of the \verb|+| (plus) sign. 
\item \verb|\fractionalTimeSignatureAPlus| lists time signatures with the \verb|+| (plus) sign, when the list with four \verb|NUM|s are given.
\item \verb|NUM1|, \verb|NUM2|, \verb|NUM3|, and \verb|NUM4| can be understood as follows: \par
\[ \frac{1+\frac{2}{3}}{4} \] \par
where \verb|NUM1| is optional. The code has \verb|cond| clause, which adjusts the appearance of the time signature according to the length of the list, either having 3 or 4 numbers.
\item \verb|MEASURE_SPAN| denotes how the measure may be written using an \hyperref[sec:incompleteTuplet]{\textit{irrational time signature}}. In the example snippet, this would be: \par
\[ \frac{3}{4} + \frac{2}{12} = \mathbf{\frac{11}{12}}\] \par
\item \verb |BEAT_STRUCT| indicates beat structure, by which the beaming of the measure abides.

\item When you wish to go back to a regular time signature, use \verb|\backToNormalTimeSignature|, otherwise the identical fractional time signature will keep showing up.

\end{enumerate}
\subsection{Code}
\begin{Verbatim}[numbers=left,xleftmargin=5mm]
% Inspired by:
% https://lists.gnu.org/archive/html/lilypond-user/2014-06/msg00209.html

% Revised Aug 10 2025 to include the function to revert to a
% regular time signature

\version "2.24.4"
\language "english"

suppressWarning =
#(define-void-function (amount message)(number? string?)
  (for-each
   (lambda (warning)
    (ly:expect-warning message))
   (iota amount 1 1)))

\suppressWarning 3 "strange time signature found"

incompleteTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t

}
incompleteSmallTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t
 \once \override Voice.TupletNumber.X-offset =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       2.2
       1.2))

 \once \override Voice.TupletBracket.shorten-pair =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(-0.7 . 0.15)
       '(-0.3 . 0.8)))
 \once \override Voice.TupletBracket.X-positions =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(1.8 . 3)
       '(0.3 . 2.7)))
}

fractionalTimeSignatureA =
#(define-music-function
  (timeSignatureToShow underlyingMeter beatStructure)
  (list? fraction? number-list?)
  #{
   \time $underlyingMeter
   \set beatStructure = $beatStructure

   \override Staff.TimeSignature.stencil =
   #ly:text-interface::print

   \override Staff.TimeSignature.text =
   #(if (= (length timeSignatureToShow) 4)

        (markup
         #:override
         (cons 'baseline-skip 0)
         (#:center-column
          (#:number
           (#:concat
            (#:simple
             (number->string (car timeSignatureToShow))
             #:halign -1.5
             (#:center-column
              ((#:translate
                (cons 0 1)
                (#:fontsize -6
                            (number->string
                             (cadr timeSignatureToShow))))
               (#:translate
                (cons 0 0)
                (#:fontsize -6
                            (number->string
                             (caddr timeSignatureToShow))))))))
           #:number
           (number->string (cadddr timeSignatureToShow)))))

        (markup
         #:override
         (cons 'baseline-skip 0)
         (#:center-column
          (#:number
           (#:translate
            (cons 0 1)
            (#:fontsize -6 (number->string
                            (car timeSignatureToShow))))
           #:number
           (#:translate
            (cons 0 0)
            (#:fontsize -6 (number->string
                            (cadr timeSignatureToShow))))
           #:number
           (number->string (caddr timeSignatureToShow)))))

        )
  #})

fractionalTimeSignatureAPlus =
#(define-music-function
  (timeSignatureToShow underlyingMeter beatStructure)
  (list? fraction? number-list?)
  #{
   \time $underlyingMeter
   \set beatStructure = $beatStructure

   \override Staff.TimeSignature.stencil =
   #ly:text-interface::print

   \override Staff.TimeSignature.text =
   #(if (= (length timeSignatureToShow) 4)

        (markup
         #:override
         (cons 'baseline-skip 0)
         (#:center-column
          (#:number
           (#:concat
            (#:simple
             (number->string (car timeSignatureToShow))

             (#:fontsize -12 (string-append " "))
             (string-append "+")
             (#:fontsize -12 (string-append " "))

             #:center-column
             ((#:translate
               (cons 0 1)
               (#:fontsize -6
                           (number->string
                            (cadr timeSignatureToShow))))
              (#:translate
               (cons 0 0)
               (#:fontsize -6
                           (number->string
                            (caddr timeSignatureToShow)))))))
           #:number
           (number->string (cadddr timeSignatureToShow)))))

        (markup
         #:override
         (cons 'baseline-skip 0)
         (#:center-column
          (#:number
           (#:translate
            (cons 0 1)
            (#:fontsize -6 (number->string
                            (car timeSignatureToShow))))
           #:number
           (#:translate
            (cons 0 0)
            (#:fontsize -6 (number->string
                            (cadr timeSignatureToShow))))
           #:number
           (number->string (caddr timeSignatureToShow)))))

        )
  #})


backToNormalTimeSignature =
{
 \unset beatStructure
 \revert Timing.TimeSignature.stencil
 \revert Timing.TimeSignature.text
 \revert Staff.TimeSignature.stencil
 \revert Staff.TimeSignature.text
}


\new Staff \with { instrumentName = \markup {\fontsize #4 \box "A"}} {
 \fractionalTimeSignatureA #'(3 2 3 4) 11/12 3,3,3,2
 \tuplet 3/2 { c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c' c' c'}
 \incompleteTupletBracket \tuplet 3/2 {c' c'}
 \backToNormalTimeSignature
 \time 3/4
 c'2.
}
\new Staff \with { instrumentName = \markup {\fontsize #4 \box "B"}} {
 \fractionalTimeSignatureAPlus #'(3 2 3 4) 11/12 3,3,3,2
 \tuplet 3/2 { c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c' c' c'}
 \incompleteTupletBracket \tuplet 3/2 {c' c'}
 \backToNormalTimeSignature
 \time 3/4
 c'2.
}
\new Staff \with { instrumentName = \markup {\fontsize #4 \box "C"}} {
 \fractionalTimeSignatureA #'(11 3 4) 11/12 3,3,3,2
 \tuplet 3/2 { c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c' c' c'}
 \incompleteTupletBracket \tuplet 3/2 {c' c'}
 \backToNormalTimeSignature
 \time 3/4
 c'2.
}

\end{Verbatim}

\hyperref[sec:toc]{\textbf{Table of Contents}}

\vfill \break

%%%%%%%%%%%%%%%%%%%


\section {Fractional Time Signatures, Style B}

\hfill
\lilypondfile[staffsize=24,hpadding=4,voffset=4pt]{/fractionalTimeSignatureB.ly}
\hfill

\subsection{Description}
Style B differs from Style A, as the fraction has a bigger font size. This is similar to the design of fractional time signatures I have used in works such as \textit{Gz II} (2017-22).\autocite{RN1748}  

\subsection{Grammar}
\begin{verbatim}
\fractionalTimeSignatureB 
       #'(NUM1 NUM2 NUM3 NUM4) MEASURE_SPAN BEAT_STRUCT
\fractionalTimeSignatureB
       #'(NUM2 NUM3 NUM4) MEASURE_SPAN BEAT_STRUCT
\fractionalTimeSignatureBPlus 
       #'(NUM1 NUM2 NUM3 NUM4) MEASURE_SPAN BEAT_STRUCT
\fractionalTimeSignatureBPlus 
       #'(NUM2 NUM3 NUM4) MEASURE_SPAN BEAT_STRUCT
       
\backToNormalTimeSignature

\end{verbatim}
\textbf{NB} 
\begin{enumerate}
\item \verb|\fractionalTimeSignatureB| lists time signatures \textit{without} the use of the \verb|+| (plus) sign. 
\item \verb|\fractionalTimeSignatureBPlus| lists time signatures with the \verb|+| (plus) sign, when the list with four \verb|NUM|s are given.
\item See \hyperref[sec:time_signatures_styleA_convention]{\textit{Grammar} of Fractional Time Signatures, Style A} for the explanation on the arguments.
\item When you wish to go back to a regular time signature, use \verb|\backToNormalTimeSignature|, otherwise the identical fractional time signature will keep showing up.
\end{enumerate}
\subsection{Code}
\begin{Verbatim}[numbers=left,xleftmargin=5mm]
\version "2.24.4"
\language "english"

% Revised Jan 2 2025 for improving the appearance of fractions
% Revised Aug 10 2025 to include the function to revert to a
% regular time signature

suppressWarning =
#(define-void-function (amount message)(number? string?)
  (for-each
   (lambda (warning)
    (ly:expect-warning message))
   (iota amount 1 1)))

\suppressWarning 3 "strange time signature found"

incompleteTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t

}
incompleteSmallTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t
 \once \override Voice.TupletNumber.X-offset =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       2.2
       1.2))

 \once \override Voice.TupletBracket.shorten-pair =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(-0.7 . 0.15)
       '(-0.3 . 0.8)))
 \once \override Voice.TupletBracket.X-positions =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(1.8 . 3)
       '(0.3 . 2.7)))
}

fractionalTimeSignatureB =
#(define-music-function
  (timeSignatureToShow underlyingMeter beatStructure)
  (list? fraction? number-list?)
  #{

   \time $underlyingMeter
   \set beatStructure = $beatStructure

   \override Staff.TimeSignature.stencil =
   #ly:text-interface::print
   \override Staff.TimeSignature.text =

   #(if (= (length timeSignatureToShow) 4)

        (markup
         (make-override-markup
          (cons 'baseline-skip 0)
          (make-center-column-markup
           (list
            (make-line-markup
             (list
              (make-number-markup
               (number->string (car timeSignatureToShow)))


              (make-hspace-markup -0.5)
              (make-right-align-markup
               (make-number-markup
                (make-translate-markup
                 (cons 0 1.5)
                 (make-fontsize-markup
                  -3
                  (number->string (cadr timeSignatureToShow))))))

              (make-hspace-markup -1.5)

              (make-override-markup
               (cons 'alignment 0)
               (make-translate-markup
                (cons 0 0.8)
                (make-draw-line-markup (cons 1.5 1.35))))

              (make-hspace-markup -1.5)

              (make-number-markup
               (make-left-align-markup
                (make-fontsize-markup
                 -3
                 (number->string (caddr timeSignatureToShow)))))))

            (make-number-markup
             (number->string (cadddr timeSignatureToShow)))))))


        (markup
         (make-override-markup
          (cons 'baseline-skip 0)
          (make-center-column-markup
           (list
            (make-line-markup
             (list
              (make-number-markup
               (make-right-align-markup
                (make-translate-markup
                 (cons 0 1.5)
                 (make-fontsize-markup
                  -3
                  (number->string (car timeSignatureToShow))))))

              (make-hspace-markup -1.5)

              (make-override-markup
               (cons 'alignment 0)
               (make-translate-markup
                (cons 0 0.8)
                (make-draw-line-markup (cons 1.5 1.35))))

              (make-hspace-markup -1.5)

              (make-translate-markup
               (cons 0 0)
               (make-fontsize-markup
                -3
                (make-number-markup
                 (number->string (cadr timeSignatureToShow)))))))

            (make-number-markup
             (number->string (caddr timeSignatureToShow)))))))

        )
  #})

fractionalTimeSignatureBPlus =
#(define-music-function
  (timeSignatureToShow underlyingMeter beatStructure)
  (list? fraction? number-list?)
  #{

   \time $underlyingMeter
   \set beatStructure = $beatStructure

   \override Staff.TimeSignature.stencil =
   #ly:text-interface::print
   \override Staff.TimeSignature.text =

   #(if (= (length timeSignatureToShow) 4)


        (markup
         (make-override-markup
          (cons 'baseline-skip 0)
          (make-center-column-markup
           (list
            (make-line-markup
             (list
              (make-number-markup
               (number->string (car timeSignatureToShow)))
              (make-fontsize-markup
               -12
               (make-simple-markup " "))


              (make-hspace-markup -1.25)
              (make-translate-markup
               (cons 0 0.4)
               (make-bold-markup
                (make-simple-markup "+")))

              (make-hspace-markup -0.25)

              (make-hspace-markup -0.5)
              (make-right-align-markup
               (make-number-markup
                (make-translate-markup
                 (cons 0 1.5)
                 (make-fontsize-markup
                  -3
                  (number->string (cadr timeSignatureToShow))))))




              (make-hspace-markup -1.5)

              (make-override-markup
               (cons 'alignment 0)
               (make-translate-markup
                (cons 0 0.8)
                (make-draw-line-markup (cons 1.5 1.35))))

              (make-hspace-markup -1.5)

              (make-number-markup
               (make-left-align-markup
                (make-fontsize-markup
                 -3
                 (number->string (caddr timeSignatureToShow)))))))

            (make-number-markup
             (number->string (cadddr timeSignatureToShow)))))))


        (markup
         (make-override-markup
          (cons 'baseline-skip 0)
          (make-center-column-markup
           (list
            (make-line-markup
             (list
              (make-number-markup
               (make-right-align-markup
                (make-translate-markup
                 (cons 0 1.6)
                 (make-fontsize-markup
                  -3
                  (number->string (car timeSignatureToShow))))))

              (make-hspace-markup -1.5)

              (make-override-markup
               (cons 'alignment 0)
               (make-translate-markup
                (cons 0 0.8)
                (make-draw-line-markup (cons 1.5 1.35))))

              (make-hspace-markup -1.5)

              (make-translate-markup
               (cons 0 0)
               (make-fontsize-markup
                -3
                (make-number-markup
                 (number->string (cadr timeSignatureToShow)))))))

            (make-number-markup
             (number->string (caddr timeSignatureToShow)))))))
        )
  #})

backToNormalTimeSignature =
{
 \unset beatStructure
 \revert Timing.TimeSignature.stencil
 \revert Timing.TimeSignature.text
 \revert Staff.TimeSignature.stencil
 \revert Staff.TimeSignature.text
}


{
 \fractionalTimeSignatureB #'(1 2 3 4) 11/12 3,3,3,2
 \tuplet 3/2 {c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c' c' c'}
 \incompleteTupletBracket \tuplet 3/2 {c' c'}
 \backToNormalTimeSignature
 \time 3/4
 c'2.
}

{
 \fractionalTimeSignatureBPlus #'(3 2 3 4) 11/12 3,3,3,2
 \tuplet 3/2 {c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c' c' c'}
 \incompleteTupletBracket \tuplet 3/2 {c' c'}
 \backToNormalTimeSignature
 \time 3/4
 c'2.
}

{
 \fractionalTimeSignatureB #'(11 3 4) 11/12 3,3,3,2
 \tuplet 3/2 {c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c' c' c'}
 \incompleteTupletBracket \tuplet 3/2 {c' c'}
 \backToNormalTimeSignature
 \time 3/4
 c'2.
}
\end{Verbatim}

\hyperref[sec:toc]{\textbf{Table of Contents}}

\vfill \break

%%%%%%%%%%%%%%%%%%%



\section {Fractional Time Signatures, Style C}

\hfill
\lilypondfile[staffsize=24,hpadding=4,voffset=4pt]{/fractionalTimeSignatureC.ly}
\hfill

\subsection{Description}
Style C of the fractional time signatures offers the largest font size for displaying the fractions. This design is commonly seen in scores by Chaya Czernowin, in such works as String Quartet (1995),\autocite{RN1749}  \textit{Lovesong} (2010),\autocite{RN1751} \textit{Streams (Slow Summer Stay I)} (2012),\autocite{RN1750}  and \textit{At the fringe of our gaze} (2012/13).\autocite{RN1752}  

\subsection{Grammar}
\begin{verbatim}
\fractionalTimeSignatureC 
       #'(NUM1 NUM2 NUM3 NUM4) MEASURE_SPAN BEAT_STRUCT
\fractionalTimeSignatureC 
       #'(NUM2 NUM3 NUM4) MEASURE_SPAN BEAT_STRUCT
       
\backToNormalTimeSignature

\end{verbatim}
\textbf{NB} 
\begin{enumerate}
\item By default, \verb|\fractionalTimeSignatureC| shows \verb|+| (plus) sign when four \verb|NUM|s are given. As the font size for the ordinary numerator and the fractions is the same, without \verb|+| it becomes very confusing to read the time signature. Thus, contrary to Styles A and B, there is no separate function for the time signature with the \verb|+| sign given.
\item See \hyperref[sec:time_signatures_styleA_convention]{\textit{Grammar} of Fractional Time Signatures, Style A} for the explanation on the arguments.
\item When you wish to go back to a regular time signature, use \verb|\backToNormalTimeSignature|, otherwise the identical fractional time signature will keep showing up.
\end{enumerate}
\subsection{Code}
\begin{Verbatim}[numbers=left,xleftmargin=5mm]
\version "2.24.4"
\language "english"


% Revised Jan 2 2025 for improving the appearance of fractions
% Revised Aug 10 2025 to include the function to revert to a
% regular time signature

suppressWarning =
#(define-void-function (amount message)(number? string?)
  (for-each
   (lambda (warning)
    (ly:expect-warning message))
   (iota amount 1 1)))

\suppressWarning 2 "strange time signature found"

incompleteTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t

}
incompleteSmallTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t
 \once \override Voice.TupletNumber.X-offset =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       2.2
       1.2))

 \once \override Voice.TupletBracket.shorten-pair =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(-0.7 . 0.15)
       '(-0.3 . 0.8)))
 \once \override Voice.TupletBracket.X-positions =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(1.8 . 3)
       '(0.3 . 2.7)))
}

fractionalTimeSignatureC =
#(define-music-function
  (timeSignatureToShow underlyingMeter beatStructure)
  (list? fraction? number-list?)
  #{

   \time $underlyingMeter
   \set beatStructure = $beatStructure

   \override Staff.TimeSignature.stencil =
   #ly:text-interface::print
   \override Staff.TimeSignature.text =

   #(if (= (length timeSignatureToShow) 4)

        (markup
         (make-override-markup
          (cons 'baseline-skip 0)
          (make-center-column-markup
           (list
            (make-line-markup
             (list
              (make-number-markup
               (number->string
                (car timeSignatureToShow)))
              (make-fontsize-markup
               -12
               (make-simple-markup " "))


              (make-hspace-markup -1.25)
              (make-translate-markup
               (cons 0 0.4)
               (make-bold-markup
                (make-simple-markup "+")))

              (make-hspace-markup -0.25)

              (make-hspace-markup -0.5)
              (make-right-align-markup
               (make-number-markup
                (number->string
                 (cadr timeSignatureToShow))))

              (make-hspace-markup -0.6)

              (make-override-markup
               (list (cons 'alignment 0)
                     (cons 'thickness 2))
               (make-draw-line-markup (cons 0.5 2)))

              (make-hspace-markup -0.6)

              (make-number-markup
               (make-left-align-markup
                (number->string
                 (caddr timeSignatureToShow))))))

            (make-number-markup
             (number->string
              (cadddr timeSignatureToShow)))))))


        (markup
         (make-override-markup
          (cons 'baseline-skip 0)
          (make-center-column-markup
           (list
            (make-line-markup
             (list

              (make-right-align-markup
               (make-number-markup
                (number->string
                 (car timeSignatureToShow))))

              (make-hspace-markup -0.6)

              (make-override-markup
               (list (cons 'alignment 0)
                     (cons 'thickness 2))
               (make-draw-line-markup
                (cons 0.5 2)))

              (make-hspace-markup -0.6)

              (make-number-markup
               (make-left-align-markup
                (number->string
                 (cadr timeSignatureToShow))))))

            (make-number-markup
             (number->string
              (caddr timeSignatureToShow))))))
         ))
  #})

backToNormalTimeSignature =
{
 \unset beatStructure
 \revert Timing.TimeSignature.stencil
 \revert Timing.TimeSignature.text
 \revert Staff.TimeSignature.stencil
 \revert Staff.TimeSignature.text
}


{
 \fractionalTimeSignatureC #'(3 2 3 4) 11/12 3,3,3,2
 \tuplet 3/2 { c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c' c' c'}
 \incompleteTupletBracket \tuplet 3/2 {c' c'}

 \backToNormalTimeSignature
 \time 3/4
 c'2.
}


{
 \fractionalTimeSignatureC #'(1 3 4) 11/12 3,3,3,2
 \tuplet 3/2 { c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c' c' c'}
 \incompleteTupletBracket \tuplet 3/2 {c' c'}
  \backToNormalTimeSignature
 \time 3/4
 c'2.
}
\end{Verbatim}

\hyperref[sec:toc]{\textbf{Table of Contents}}

\vfill \break

%%%%%%%%%%%%%%%%%%%



\section {Compound Meter with Two Fractional Time Signatures, Style A}

\hfill
\lilypondfile[staffsize=24,hpadding=4,voffset=4pt]{/compoundFractionalTimeSignatureATwo.ly}
\hfill

\subsection{Description}
This is an implementation of a compound meter with two fractional time signatures with Style A.  

\subsection{Grammar}
\begin{verbatim}
\compoundFractionalTimeSignatureATwo
       #'((TIME_SIG1)(TIME_SIG2)) MEASURE_SPAN BEAT_STRUCT

\backToNormalTimeSignature

\end{verbatim}
\textbf{NB} 
\begin{enumerate}
\item Following the convention of \verb|\compoundMeter| to enter the two time signatures, you will create a list of lists. Each \verb|TIME_SIG| accepts:\par
\begin{itemize} 
\item an ordinary time signature (list with two numbers); 
\item a time signature with a fraction (list with three numbers), or;
\item a time signature with an ordinary numerator and a fraction.
\end{itemize} 
See \hyperref[sec:time_signatures_styleA_convention]{\textit{Grammar} of Fractional Time Signatures, Style A} for the explanation on the arguments for the order of arguments to specify time signatures.
\item \verb|MEASURE_SPAN| and \verb|BEAT_STRUCT| follow the same convention as before.
\item When you wish to go back to a regular time signature, use \verb|\backToNormalTimeSignature|, otherwise the identical fractional time signature will keep showing up.
\end{enumerate}
\subsection{Code}
\begin{Verbatim}[numbers=left,xleftmargin=5mm]
\version "2.24.4"
\language "english"

% Revised Aug 10 2025 to include the function to revert to a
% regular time signature

suppressWarning =
#(define-void-function (amount message)(number? string?)
  (for-each
   (lambda (warning)
    (ly:expect-warning message))
   (iota amount 1 1)))

\suppressWarning 1 "strange time signature found"

incompleteTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t

}
incompleteSmallTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t
 \once \override Voice.TupletNumber.X-offset =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       2.2
       1.2))

 \once \override Voice.TupletBracket.shorten-pair =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(-0.7 . 0.15)
       '(-0.3 . 0.8)))
 \once \override Voice.TupletBracket.X-positions =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(1.8 . 3)
       '(0.3 . 2.7)))
}

compoundFractionalTimeSignatureATwo =
#(define-music-function
  (timeSignatureToShow underlyingMeter beatStructure)
  (list? fraction? number-list?)
  (define mkup
   (markup
    #:concat
    (
     #:override
     (cons 'baseline-skip 0)
     (cond ((= (length (car timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (car timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (car timeSignatureToShow)))))))

           ((= (length (car timeSignatureToShow)) 3)
            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list


               (make-center-column-markup
                (list
                 (make-translate-markup
                  (cons 0 1)
                  (make-fontsize-markup
                   -6
                   (make-number-markup
                    (number->string
                     (car (car timeSignatureToShow))))))
                 (make-translate-markup
                  (cons 0 0)
                  (make-fontsize-markup
                   -6
                   (make-number-markup
                    (number->string
                     (cadr (car timeSignatureToShow))))))))
               (make-number-markup
                (number->string
                 (caddr (car timeSignatureToShow))))))
             ))


           ((= (length (car timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list

               (make-concat-markup
                (list (make-number-markup
                       (number->string
                        (car (car timeSignatureToShow))))
                      (make-halign-markup
                       -1.5
                       (make-center-column-markup
                        (list
                         (make-translate-markup
                          (cons 0 1)
                          (make-fontsize-markup
                           -6
                           (make-number-markup
                            (number->string
                             (cadr (car timeSignatureToShow))))))
                         (make-translate-markup
                          (cons 0 0)
                          (make-fontsize-markup
                           -6
                           (make-number-markup
                            (number->string
                             (caddr (car timeSignatureToShow)))))))))))
               (make-number-markup
                (number->string
                 (cadddr (car timeSignatureToShow))))))
             ))
           )


     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")
     #:translate
     (cons 0 -0.5)
     (#:bold "+")
     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")

     #:override
     (cons 'baseline-skip 0)
     (cond ((= (length (cadr timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (cadr timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (cadr timeSignatureToShow)))))))

           ((= (length (cadr timeSignatureToShow)) 3)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list


               (make-center-column-markup
                (list
                 (make-translate-markup
                  (cons 0 1)
                  (make-fontsize-markup
                   -6
                   (make-number-markup
                    (number->string
                     (car (cadr timeSignatureToShow))))))
                 (make-translate-markup
                  (cons 0 0)
                  (make-fontsize-markup
                   -6
                   (make-number-markup
                    (number->string
                     (cadr (cadr timeSignatureToShow))))))))
               (make-number-markup
                (number->string
                 (caddr (cadr timeSignatureToShow))))))
             ))


           ((= (length (cadr timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list

               (make-concat-markup
                (list (make-number-markup
                       (number->string
                        (car (cadr timeSignatureToShow))))
                      (make-halign-markup
                       -1.5
                       (make-center-column-markup
                        (list
                         (make-translate-markup
                          (cons 0 1)
                          (make-fontsize-markup
                           -6
                           (make-number-markup
                            (number->string
                             (cadr (cadr timeSignatureToShow))))))
                         (make-translate-markup
                          (cons 0 0)
                          (make-fontsize-markup
                           -6
                           (make-number-markup
                            (number->string
                             (caddr (cadr timeSignatureToShow)))))))))))
               (make-number-markup
                (number->string
                 (cadddr (cadr timeSignatureToShow))))))
             ))
           )
     )))

  #{
   \time $underlyingMeter
   \set beatStructure = $beatStructure

   \override Timing.TimeSignature.stencil =
   #ly:text-interface::print
   \override Timing.TimeSignature.text =
   #mkup
  #})


backToNormalTimeSignature =
{
 \unset beatStructure
 \revert Timing.TimeSignature.stencil
 \revert Timing.TimeSignature.text
 \revert Staff.TimeSignature.stencil
 \revert Staff.TimeSignature.text
}


{
 \compoundFractionalTimeSignatureATwo #'((3 4)(2 3 4)) 11/12 3,3,3,2
 \tuplet 3/2 { c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c' c' c'}
 \incompleteTupletBracket \tuplet 3/2 {c' c'}
 \backToNormalTimeSignature
 \time 3/4
 c'2.
}
\end{Verbatim}
\label{sec:compoundfractionalmeter_discussion}
\subsection{Discussion}
\begin{enumerate}
\item This was a tricky one to make, as I had to resort to building the Scheme code without using the syntactic sugars, i.e. \verb|#:|.\footnote{See \textit{Known issues and warnings} at: \url{https://lilypond.org/doc/v2.24/Documentation/extending/markup-construction-in-scheme}} If any modification are to be made to this code, it is recommended to carefully examine where the corresponding parenthesis of a starting parenthesis is located. It is also helpful to watch LilyPond Log for any errors, as it seems to give hints for how many argument(s) a function is looking for. 
\item I am hoping to find ways to simplify the code, as the same bits (with variations in variables that are called upon) of the codes are used to streamline the formatting of the time signature appearances. 
\item When you wish to go back to a regular time signature, use \verb|\backToNormalTimeSignature|, otherwise the identical fractional time signature will keep showing up.
\end{enumerate}
\hyperref[sec:toc]{\textbf{Table of Contents}}

\vfill \break

%%%%%%%%%%%%%%%%%%%


\section {Compound Meter with Two Fractional Time Signatures, Style B}

\hfill
\lilypondfile[staffsize=24,hpadding=4,voffset=4pt]{/compoundFractionalTimeSignatureBTwo.ly}
\hfill

\subsection{Description}
This is an implementation of a compound meter with two fractional time signatures with Style B.  

\subsection{Grammar}
\begin{verbatim}
\compoundFractionalTimeSignatureBTwo 
       #'((TIME_SIG1)(TIME_SIG2)) MEASURE_SPAN BEAT_STRUCT

\backToNormalTimeSignature

\end{verbatim}
\textbf{NB} 
\begin{enumerate}
\item Following the convention of \verb|\compoundMeter| to enter the two time signatures, you will create a list of lists. Each \verb|TIME_SIG| accepts: an ordinary time signature (list with two numbers), a time signature with a fraction (list with three numbers), or a time signature with an ordinary numerator and a fraction. See \hyperref[sec:time_signatures_styleA_convention]{\textit{Grammar} of Fractional Time Signatures, Style A} for the explanation on the arguments for the order of arguments to specify time signatures.
\item \verb|MEASURE_SPAN| and \verb|BEAT_STRUCT| follow the same convention as before.
\item When you wish to go back to a regular time signature, use \verb|\backToNormalTimeSignature|, otherwise the identical fractional time signature will keep showing up.
\end{enumerate}
\subsection{Code}
\begin{Verbatim}[numbers=left,xleftmargin=5mm]
\version "2.24.4"
\language "english"


% Revised Jan 2 2025 for improving the appearance of fractions
% Revised Aug 10 2025 to include the function to revert to a
% regular time signature

suppressWarning =
#(define-void-function (amount message)(number? string?)
  (for-each
   (lambda (warning)
    (ly:expect-warning message))
   (iota amount 1 1)))

\suppressWarning 1 "strange time signature found"

incompleteTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t

}
incompleteSmallTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t
 \once \override Voice.TupletNumber.X-offset =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       2.2
       1.2))

 \once \override Voice.TupletBracket.shorten-pair =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(-0.7 . 0.15)
       '(-0.3 . 0.8)))
 \once \override Voice.TupletBracket.X-positions =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(1.8 . 3)
       '(0.3 . 2.7)))
}

compoundFractionalTimeSignatureBTwo =
#(define-music-function
  (timeSignatureToShow underlyingMeter beatStructure)
  (list? fraction? number-list?)
  (define mkup
   (markup
    #:concat
    (

     #:override
     (cons 'baseline-skip 0)
     (cond ((= (length (car timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (car timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (car timeSignatureToShow)))))))

           ((= (length (car timeSignatureToShow)) 3)
            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (make-right-align-markup
                   (make-translate-markup
                    (cons 0 1.6)
                    (make-fontsize-markup
                     -3
                     (number->string
                      (car (car timeSignatureToShow)))))))

                 (make-hspace-markup -1.5)

                 (make-override-markup
                  (cons 'alignment 0)
                  (make-translate-markup
                   (cons 0 0.8)
                   (make-draw-line-markup (cons 1.5 1.35))))

                 (make-hspace-markup -1.5)

                 (make-translate-markup
                  (cons 0 0)
                  (make-fontsize-markup
                   -3
                   (make-number-markup
                    (number->string
                     (cadr (car timeSignatureToShow))))))))

               (make-number-markup
                (number->string
                 (caddr (car timeSignatureToShow))))))))


           ((= (length (car timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (number->string
                   (car (car timeSignatureToShow))))
                 (make-fontsize-markup
                  -12
                  (make-simple-markup " "))

                 (make-hspace-markup -1.25)
                 (make-translate-markup
                  (cons 0 0.4)
                  (make-bold-markup
                   (make-simple-markup "+")))

                 (make-hspace-markup -0.25)

                 (make-hspace-markup -0.5)
                 (make-right-align-markup
                  (make-number-markup
                   (make-translate-markup
                    (cons 0 1.5)
                    (make-fontsize-markup
                     -3
                     (number->string
                      (cadr (car timeSignatureToShow)))))))

                 (make-hspace-markup -1.5)

                 (make-override-markup
                  (cons 'alignment 0)
                  (make-translate-markup
                   (cons 0 0.8)
                   (make-draw-line-markup
                    (cons 1.5 1.35))))

                 (make-hspace-markup -1.5)

                 (make-number-markup
                  (make-left-align-markup
                   (make-fontsize-markup
                    -3
                    (number->string
                     (caddr (car timeSignatureToShow))))))))

               (make-number-markup
                (number->string
                 (cadddr (car timeSignatureToShow)))))))))


     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")
     #:translate
     (cons 0 -0.5)
     (#:bold "+")
     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")

     #:override
     (cons 'baseline-skip 0)

     (cond ((= (length (cadr timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (cadr timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (cadr timeSignatureToShow)))))))

           ((= (length (cadr timeSignatureToShow)) 3)
            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (make-right-align-markup
                   (make-translate-markup
                    (cons 0 1.6)
                    (make-fontsize-markup
                     -3
                     (number->string
                      (car (cadr timeSignatureToShow)))))))

                 (make-hspace-markup -1.5)

                 (make-override-markup
                  (cons 'alignment 0)
                  (make-translate-markup
                   (cons 0 0.8)
                   (make-draw-line-markup (cons 1.5 1.35))))

                 (make-hspace-markup -1.5)

                 (make-translate-markup
                  (cons 0 0)
                  (make-fontsize-markup
                   -3
                   (make-number-markup
                    (number->string
                     (cadr (cadr timeSignatureToShow))))))))

               (make-number-markup
                (number->string
                 (caddr (cadr timeSignatureToShow))))))))


           ((= (length (cadr timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (number->string
                   (car (cadr timeSignatureToShow))))
                 (make-fontsize-markup
                  -12
                  (make-simple-markup " "))

                 (make-hspace-markup -1.25)
                 (make-translate-markup
                  (cons 0 0.4)
                  (make-bold-markup
                   (make-simple-markup "+")))

                 (make-hspace-markup -0.25)

                 (make-hspace-markup -0.5)
                 (make-right-align-markup
                  (make-number-markup
                   (make-translate-markup
                    (cons 0 1.5)
                    (make-fontsize-markup
                     -3
                     (number->string
                      (cadr (cadr timeSignatureToShow)))))))

                 (make-hspace-markup -1.5)

                 (make-override-markup
                  (cons 'alignment 0)
                  (make-translate-markup
                   (cons 0 0.8)
                   (make-draw-line-markup
                    (cons 1.5 1.35))))

                 (make-hspace-markup -1.5)

                 (make-number-markup
                  (make-left-align-markup
                   (make-fontsize-markup
                    -3
                    (number->string
                     (caddr (cadr timeSignatureToShow))))))))

               (make-number-markup
                (number->string
                 (cadddr (cadr timeSignatureToShow)))))))))
     )))

  #{
   \time $underlyingMeter
   \set beatStructure = $beatStructure

   \override Timing.TimeSignature.stencil =
   #ly:text-interface::print
   \override Timing.TimeSignature.text =
   #mkup
  #})


backToNormalTimeSignature =
{
 \unset beatStructure
 \revert Timing.TimeSignature.stencil
 \revert Timing.TimeSignature.text
 \revert Staff.TimeSignature.stencil
 \revert Staff.TimeSignature.text
}


{
 \compoundFractionalTimeSignatureBTwo #'((3 4)(2 3 4)) 11/12 3,3,3,2
 \tuplet 3/2 { c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c' c' c'}
 \incompleteTupletBracket \tuplet 3/2 {c' c'}
 \backToNormalTimeSignature
 \time 3/4
 c'2.
}

\end{Verbatim}
\subsection{Discussion}
See \hyperref[sec:compoundfractionalmeter_discussion]{\textbf{Discussion}} of the entry \textit{Compound Meter with Two Fractional Time Signatures, Style A.} \par
\hyperref[sec:toc]{\textbf{Table of Contents}}

\vfill \break

%%%%%%%%%%%%%%%%%%%



\section {Compound Meter with Two Fractional Time Signatures, Style C}

\hfill
\lilypondfile[staffsize=24,hpadding=4,voffset=4pt]{/compoundFractionalTimeSignatureCTwo.ly}
\hfill

\subsection{Description}
This is an implementation of a compound meter with two fractional time signatures with Style C.  

\subsection{Grammar}
\begin{verbatim}
\compoundFractionalTimeSignatureCTwo 
       #'((TIME_SIG1)(TIME_SIG2)) MEASURE_SPAN BEAT_STRUCT

\backToNormalTimeSignature

\end{verbatim}
\textbf{NB} 
\begin{enumerate}
\item Following the convention of \verb|\compoundMeter| to enter the two time signatures, you will create a list of lists. Each \verb|TIME_SIG| accepts: an ordinary time signature (list with two numbers), a time signature with a fraction (list with three numbers), or a time signature with an ordinary numerator and a fraction. See \hyperref[sec:time_signatures_styleA_convention]{\textit{Grammar} of Fractional Time Signatures, Style A} for the explanation on the arguments for the order of arguments to specify time signatures.
\item \verb|MEASURE_SPAN| and \verb|BEAT_STRUCT| follow the same convention as before.
\item When you wish to go back to a regular time signature, use \verb|\backToNormalTimeSignature|, otherwise the identical fractional time signature will keep showing up.
\end{enumerate}
\subsection{Code}
\begin{Verbatim}[numbers=left,xleftmargin=5mm]
\version "2.24.4"
\language "english"


% Revised Jan 2 2025 for improving the appearance of fractions
% Revised Aug 10 2025 to include the function to revert to a
% regular time signature

suppressWarning =
#(define-void-function (amount message)(number? string?)
  (for-each
   (lambda (warning)
    (ly:expect-warning message))
   (iota amount 1 1)))

\suppressWarning 1 "strange time signature found"

incompleteTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t

}
incompleteSmallTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t
 \once \override Voice.TupletNumber.X-offset =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       2.2
       1.2))

 \once \override Voice.TupletBracket.shorten-pair =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(-0.7 . 0.15)
       '(-0.3 . 0.8)))
 \once \override Voice.TupletBracket.X-positions =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(1.8 . 3)
       '(0.3 . 2.7)))
}

compoundFractionalTimeSignatureCTwo =
#(define-music-function
  (timeSignatureToShow underlyingMeter beatStructure)
  (list? fraction? number-list?)
  (define mkup
   (markup
    #:concat
    (

     #:override
     (cons 'baseline-skip 0)
     (cond ((= (length (car timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (car timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (car timeSignatureToShow)))))))

           ((= (length (car timeSignatureToShow)) 3)
            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list

                 (make-right-align-markup
                  (make-number-markup
                   (number->string
                    (car (car timeSignatureToShow)))))

                 (make-hspace-markup -0.6)

                 (make-override-markup
                  (list (cons 'alignment 0)
                        (cons 'thickness 2))
                  (make-draw-line-markup
                   (cons 0.5 2)))

                 (make-hspace-markup -0.6)

                 (make-number-markup
                  (make-left-align-markup
                   (number->string
                    (cadr (car timeSignatureToShow)))))))

               (make-number-markup
                (number->string
                 (caddr (car timeSignatureToShow))))))))


           ((= (length (car timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (number->string
                   (car (car timeSignatureToShow))))
                 (make-fontsize-markup
                  -12
                  (make-simple-markup " "))


                 (make-hspace-markup -1.25)
                 (make-translate-markup
                  (cons 0 0.4)
                  (make-bold-markup
                   (make-simple-markup "+")))

                 (make-hspace-markup -0.25)

                 (make-hspace-markup -0.5)
                 (make-right-align-markup
                  (make-number-markup
                   (number->string
                    (cadr (car timeSignatureToShow)))))

                 (make-hspace-markup -0.6)

                 (make-override-markup
                  (list (cons 'alignment 0)
                        (cons 'thickness 2))
                  (make-draw-line-markup (cons 0.5 2)))

                 (make-hspace-markup -0.6)

                 (make-number-markup
                  (make-left-align-markup
                   (number->string
                    (caddr (car timeSignatureToShow)))))))

               (make-number-markup
                (number->string
                 (cadddr (car timeSignatureToShow)))))))))


     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")
     #:translate
     (cons 0 -0.5)
     (#:bold "+")
     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")

     #:override
     (cons 'baseline-skip 0)

     (cond ((= (length (cadr timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (cadr timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (cadr timeSignatureToShow)))))))

           ((= (length (cadr timeSignatureToShow)) 3)
            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list

                 (make-right-align-markup
                  (make-number-markup
                   (number->string
                    (car (cadr timeSignatureToShow)))))

                 (make-hspace-markup -0.6)

                 (make-override-markup
                  (list (cons 'alignment 0)
                        (cons 'thickness 2))
                  (make-draw-line-markup
                   (cons 0.5 2)))

                 (make-hspace-markup -0.6)

                 (make-number-markup
                  (make-left-align-markup
                   (number->string
                    (cadr (cadr timeSignatureToShow)))))))

               (make-number-markup
                (number->string
                 (caddr (cadr timeSignatureToShow))))))))


           ((= (length (cadr timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (number->string
                   (car (cadr timeSignatureToShow))))
                 (make-fontsize-markup
                  -12
                  (make-simple-markup " "))


                 (make-hspace-markup -1.25)
                 (make-translate-markup
                  (cons 0 0.4)
                  (make-bold-markup
                   (make-simple-markup "+")))

                 (make-hspace-markup -0.25)

                 (make-hspace-markup -0.5)
                 (make-right-align-markup
                  (make-number-markup
                   (number->string
                    (cadr (cadr timeSignatureToShow)))))

                 (make-hspace-markup -0.6)

                 (make-override-markup
                  (list (cons 'alignment 0)
                        (cons 'thickness 2))
                  (make-draw-line-markup (cons 0.5 2)))

                 (make-hspace-markup -0.6)

                 (make-number-markup
                  (make-left-align-markup
                   (number->string
                    (caddr (cadr timeSignatureToShow)))))))

               (make-number-markup
                (number->string
                 (cadddr (cadr timeSignatureToShow)))))))))
     )))

  #{
   \time $underlyingMeter
   \set beatStructure = $beatStructure
   \override Timing.TimeSignature.stencil =
   #ly:text-interface::print
   \override Timing.TimeSignature.text =
   #mkup
  #})


backToNormalTimeSignature =
{
 \unset beatStructure
 \revert Timing.TimeSignature.stencil
 \revert Timing.TimeSignature.text
 \revert Staff.TimeSignature.stencil
 \revert Staff.TimeSignature.text
}


{

 \compoundFractionalTimeSignatureCTwo #'((3 4)(2 3 4)) 11/12 3,3,3,2
 \tuplet 3/2 {c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c' c' c'}
 \incompleteTupletBracket \tuplet 3/2 {c' c'}
 \backToNormalTimeSignature
 \time 3/4
 c'2.
}
\end{Verbatim}
\subsection{Discussion}
See \hyperref[sec:compoundfractionalmeter_discussion]{\textbf{Discussion}} of the entry \textit{Compound Meter with Two Fractional Time Signatures, Style A.} \par

\hyperref[sec:toc]{\textbf{Table of Contents}}

\vfill \break

%%%%%%%%%%%%%%%%%%%




\section {Compound Meter with Three Fractional Time Signatures, Style A}

\hfill
\lilypondfile[staffsize=24,hpadding=4,voffset=4pt]{/compoundFractionalTimeSignatureAThree.ly}
\hfill

\subsection{Description}
This is an implementation of a compound meter with three fractional time signatures with Style A.  


\subsection{Grammar}
\label{sec:compoundfractionalmeter_grammar}
\begin{verbatim}
\compoundFractionalTimeSignatureAThree 
     #'((TIME_SIG1)(TIME_SIG2)(TIME_SIG3)) MEASURE_SPAN BEAT_STRUCT

\backToNormalTimeSignature

\end{verbatim}
\textbf{NB} 
\begin{enumerate}
\item Following the convention of \verb|\compoundMeter| to enter the two time signatures, you will create a list of lists. Each \verb|TIME_SIG| accepts: 
\begin{itemize}
\item an ordinary time signature (list with two numbers);
\item a time signature with a fraction (list with three numbers), or; 
\item a time signature with an ordinary numerator and a fraction.
\end{itemize} 
See \hyperref[sec:time_signatures_styleA_convention]{\textit{Grammar} of Fractional Time Signatures, Style A} for the explanation on the arguments for the order of arguments to specify time signatures.
\item In the code of the given snippet, the value for \verb|MEASURE_SPAN| may appear absurd. However, this results from following the same convention as before, i.e. adding the constituent time signatures to give a general irrational time signature for the entire bar. Thus: \par
\[ \frac{3}{4} +\frac{4}{20} + \frac{2}{12} = \mathbf{\frac{67}{60}}\] \par
\item \verb|BEAT_STRUCT| follows the same convention as before; however, as the given code shows, it may be necessary to still use \verb|[| and \verb|]| to explicitly specify the beaming. 
\item When you wish to go back to a regular time signature, use \verb|\backToNormalTimeSignature|, otherwise the identical fractional time signature will keep showing up.

\end{enumerate}
\subsection{Code}
\begin{Verbatim}[numbers=left,xleftmargin=5mm]
\version "2.24.4"
\language "english"

% Revised Aug 10 2025 to include the function to revert to a
% regular time signature

suppressWarning =
#(define-void-function (amount message)(number? string?)
  (for-each
   (lambda (warning)
    (ly:expect-warning message))
   (iota amount 1 1)))

\suppressWarning 3 "strange time signature found"

incompleteTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t

}
incompleteSmallTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t
 \once \override Voice.TupletNumber.X-offset =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       2.2
       1.2))

 \once \override Voice.TupletBracket.shorten-pair =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(-0.7 . 0.15)
       '(-0.3 . 0.8)))
 \once \override Voice.TupletBracket.X-positions =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(1.8 . 3)
       '(0.3 . 2.7)))
}

compoundFractionalTimeSignatureAThree =
#(define-music-function
  (timeSignatureToShow underlyingMeter beatStructure)
  (list? fraction? number-list?)
  (define mkup
   (markup
    #:concat
    (
     #:override
     (cons 'baseline-skip 0)
     (cond ((= (length (car timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (car timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (car timeSignatureToShow)))))))

           ((= (length (car timeSignatureToShow)) 3)
            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-center-column-markup
                (list
                 (make-translate-markup
                  (cons 0 1)
                  (make-fontsize-markup
                   -6
                   (make-number-markup
                    (number->string
                     (car (car timeSignatureToShow))))))
                 (make-translate-markup
                  (cons 0 0)
                  (make-fontsize-markup
                   -6
                   (make-number-markup
                    (number->string
                     (cadr (car timeSignatureToShow))))))))
               (make-number-markup
                (number->string
                 (caddr (car timeSignatureToShow))))))
             ))


           ((= (length (car timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list

               (make-concat-markup
                (list (make-number-markup
                       (number->string
                        (car (car timeSignatureToShow))))
                      (make-halign-markup
                       -1.5
                       (make-center-column-markup
                        (list
                         (make-translate-markup
                          (cons 0 1)
                          (make-fontsize-markup
                           -6
                           (make-number-markup
                            (number->string
                             (cadr (car timeSignatureToShow))))))
                         (make-translate-markup
                          (cons 0 0)
                          (make-fontsize-markup
                           -6
                           (make-number-markup
                            (number->string
                             (caddr (car timeSignatureToShow)))))))))))
               (make-number-markup
                (number->string
                 (cadddr (car timeSignatureToShow))))))
             ))
           )


     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")
     #:translate
     (cons 0 -0.5)
     (#:bold "+")
     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")

     #:override
     (cons 'baseline-skip 0)
     (cond ((= (length (cadr timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (cadr timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (cadr timeSignatureToShow)))))))

           ((= (length (cadr timeSignatureToShow)) 3)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list


               (make-center-column-markup
                (list
                 (make-translate-markup
                  (cons 0 1)
                  (make-fontsize-markup
                   -6
                   (make-number-markup
                    (number->string
                     (car (cadr timeSignatureToShow))))))
                 (make-translate-markup
                  (cons 0 0)
                  (make-fontsize-markup
                   -6
                   (make-number-markup
                    (number->string
                     (cadr (cadr timeSignatureToShow))))))))
               (make-number-markup
                (number->string
                 (caddr (cadr timeSignatureToShow))))))
             ))


           ((= (length (cadr timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list

               (make-concat-markup
                (list (make-number-markup
                       (number->string
                        (car (cadr timeSignatureToShow))))
                      (make-halign-markup
                       -1.5
                       (make-center-column-markup
                        (list
                         (make-translate-markup
                          (cons 0 1)
                          (make-fontsize-markup
                           -6
                           (make-number-markup
                            (number->string
                             (cadr (cadr timeSignatureToShow))))))
                         (make-translate-markup
                          (cons 0 0)
                          (make-fontsize-markup
                           -6
                           (make-number-markup
                            (number->string
                             (caddr (cadr timeSignatureToShow)))))))))))
               (make-number-markup
                (number->string
                 (cadddr (cadr timeSignatureToShow))))))
             ))
           )
     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")
     #:translate
     (cons 0 -0.5)
     (#:bold "+")
     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")

     #:override
     (cons 'baseline-skip 0)
     (cond ((= (length (caddr timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (caddr timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (caddr timeSignatureToShow)))))))

           ((= (length (caddr timeSignatureToShow)) 3)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list


               (make-center-column-markup
                (list
                 (make-translate-markup
                  (cons 0 1)
                  (make-fontsize-markup
                   -6
                   (make-number-markup
                    (number->string
                     (car (caddr timeSignatureToShow))))))
                 (make-translate-markup
                  (cons 0 0)
                  (make-fontsize-markup
                   -6
                   (make-number-markup
                    (number->string
                     (cadr (caddr timeSignatureToShow))))))))
               (make-number-markup
                (number->string
                 (caddr (caddr timeSignatureToShow))))))
             ))


           ((= (length (caddr timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list

               (make-concat-markup
                (list (make-number-markup
                       (number->string
                        (car (caddr timeSignatureToShow))))
                      (make-halign-markup
                       -1.5
                       (make-center-column-markup
                        (list
                         (make-translate-markup
                          (cons 0 1)
                          (make-fontsize-markup
                           -6
                           (make-number-markup
                            (number->string
                             (cadr (caddr timeSignatureToShow))))))
                         (make-translate-markup
                          (cons 0 0)
                          (make-fontsize-markup
                           -6
                           (make-number-markup
                            (number->string
                             (caddr (caddr timeSignatureToShow)))))))))))
               (make-number-markup
                (number->string
                 (cadddr (caddr timeSignatureToShow))))))
             ))
           )


     )))

  #{
   \time $underlyingMeter
   \set beatStructure = $beatStructure

   \override Timing.TimeSignature.stencil =
   #ly:text-interface::print
   \override Timing.TimeSignature.text =
   #mkup
  #})

backToNormalTimeSignature =
{
 \unset beatStructure
 \revert Timing.TimeSignature.stencil
 \revert Timing.TimeSignature.text
 \revert Staff.TimeSignature.stencil
 \revert Staff.TimeSignature.text
}


{

 \compoundFractionalTimeSignatureAThree #'((3 4)(4 5 4)(2 3 4)) 67/60 3,3,3,4,2
 \tuplet 3/2 {c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c'[ c' c']}
 \incompleteTupletBracket \tuplet 5/4 {c'16[ c' c' c']}
 \incompleteTupletBracket \tuplet 3/2 {c'8 c'}

 \backToNormalTimeSignature
 \time 3/4
 c'2.
}
\end{Verbatim}



\subsection{Discussion}
\label{sec:compoundfractionalmeter_discussion_two}
\begin{enumerate}
\item As mentioned in the \textbf{Grammar} section, it appears that specifying the beaming in the LilyPond code is still necessary. This is probably because of the unusual value of the fraction that needs to be given in the second argument of the function, \verb|MEASURE_SPAN|.
\item As in the case of the other compound meters introduced in this document, I am hoping to find ways to simplify the code. 
\item When you wish to go back to a regular time signature, use \verb|\backToNormalTimeSignature|, otherwise the identical fractional time signature will keep showing up.
\end{enumerate}



\hyperref[sec:toc]{\textbf{Table of Contents}}

\vfill \break

%%%%%%%%%%%%%%%%%%%





\section {Compound Meter with Three Fractional Time Signatures, Style B}

\hfill
\lilypondfile[staffsize=24,hpadding=4,voffset=4pt]{/compoundFractionalTimeSignatureBThree.ly}
\hfill

\subsection{Description}
This is an implementation of a compound meter with three fractional time signatures with Style B.  

\subsection{Grammar}
\begin{verbatim}
\compoundFractionalTimeSignatureBThree 
      #'((TIME_SIG1)(TIME_SIG2)(TIME_SIG3)) MEASURE_SPAN BEAT_STRUCT

\backToNormalTimeSignature

\end{verbatim}
\textbf{NB}
\begin{enumerate}
\item See \hyperref[sec:compoundfractionalmeter_grammar]{\textbf{Grammar}} of the entry \textit{Compound Meter with Three Fractional Time Signatures, Style A.}
\item When you wish to go back to a regular time signature, use \verb|\backToNormalTimeSignature|, otherwise the identical fractional time signature will keep showing up.
\end{enumerate}

\subsection{Code}
\begin{Verbatim}[numbers=left,xleftmargin=5mm]
\version "2.24.4"
\language "english"

% Revised Jan 2 2025 for improving the appearance of fractions
% Revised Aug 10 2025 to include the function to revert to a
% regular time signature

suppressWarning =
#(define-void-function (amount message)(number? string?)
  (for-each
   (lambda (warning)
    (ly:expect-warning message))
   (iota amount 1 1)))

\suppressWarning 1 "strange time signature found"

incompleteTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t

}
incompleteSmallTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t
 \once \override Voice.TupletNumber.X-offset =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       2.2
       1.2))

 \once \override Voice.TupletBracket.shorten-pair =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(-0.7 . 0.15)
       '(-0.3 . 0.8)))
 \once \override Voice.TupletBracket.X-positions =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(1.8 . 3)
       '(0.3 . 2.7)))
}

compoundFractionalTimeSignatureBThree =
#(define-music-function
  (timeSignatureToShow underlyingMeter beatStructure)
  (list? fraction? number-list?)
  (define mkup
   (markup
    #:concat

    (

     #:override
     (cons 'baseline-skip 0)
     (cond ((= (length (car timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (car timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (car timeSignatureToShow)))))))

           ((= (length (car timeSignatureToShow)) 3)
            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (make-right-align-markup
                   (make-translate-markup
                    (cons 0 1.6)
                    (make-fontsize-markup
                     -3
                     (number->string
                      (car (car timeSignatureToShow)))))))

                 (make-hspace-markup -1.5)

                 (make-override-markup
                  (cons 'alignment 0)
                  (make-translate-markup
                   (cons 0 0.8)
                   (make-draw-line-markup (cons 1.5 1.35))))

                 (make-hspace-markup -1.5)

                 (make-translate-markup
                  (cons 0 0)
                  (make-fontsize-markup
                   -3
                   (make-number-markup
                    (number->string
                     (cadr (car timeSignatureToShow))))))))

               (make-number-markup
                (number->string
                 (caddr (car timeSignatureToShow))))))))


           ((= (length (car timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (number->string
                   (car (car timeSignatureToShow))))
                 (make-fontsize-markup
                  -12
                  (make-simple-markup " "))

                 (make-hspace-markup -1.25)
                 (make-translate-markup
                  (cons 0 0.4)
                  (make-bold-markup
                   (make-simple-markup "+")))

                 (make-hspace-markup -0.25)

                 (make-hspace-markup -0.5)
                 (make-right-align-markup
                  (make-number-markup
                   (make-translate-markup
                    (cons 0 1.5)
                    (make-fontsize-markup
                     -3
                     (number->string
                      (cadr (car timeSignatureToShow)))))))

                 (make-hspace-markup -1.5)

                 (make-override-markup
                  (cons 'alignment 0)
                  (make-translate-markup
                   (cons 0 0.8)
                   (make-draw-line-markup
                    (cons 1.5 1.35))))

                 (make-hspace-markup -1.5)

                 (make-number-markup
                  (make-left-align-markup
                   (make-fontsize-markup
                    -3
                    (number->string
                     (caddr (car timeSignatureToShow))))))))

               (make-number-markup
                (number->string
                 (cadddr (car timeSignatureToShow)))))))))


     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")
     #:translate
     (cons 0 -0.5)
     (#:bold "+")
     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")

     #:override
     (cons 'baseline-skip 0)

     (cond ((= (length (cadr timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (cadr timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (cadr timeSignatureToShow)))))))

           ((= (length (cadr timeSignatureToShow)) 3)
            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (make-right-align-markup
                   (make-translate-markup
                    (cons 0 1.6)
                    (make-fontsize-markup
                     -3
                     (number->string
                      (car (cadr timeSignatureToShow)))))))

                 (make-hspace-markup -1.5)

                 (make-override-markup
                  (cons 'alignment 0)
                  (make-translate-markup
                   (cons 0 0.8)
                   (make-draw-line-markup (cons 1.5 1.35))))

                 (make-hspace-markup -1.5)

                 (make-translate-markup
                  (cons 0 0)
                  (make-fontsize-markup
                   -3
                   (make-number-markup
                    (number->string
                     (cadr (cadr timeSignatureToShow))))))))

               (make-number-markup
                (number->string
                 (caddr (cadr timeSignatureToShow))))))))


           ((= (length (cadr timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (number->string
                   (car (cadr timeSignatureToShow))))
                 (make-fontsize-markup
                  -12
                  (make-simple-markup " "))

                 (make-hspace-markup -1.25)
                 (make-translate-markup
                  (cons 0 0.4)
                  (make-bold-markup
                   (make-simple-markup "+")))

                 (make-hspace-markup -0.25)

                 (make-hspace-markup -0.5)
                 (make-right-align-markup
                  (make-number-markup
                   (make-translate-markup
                    (cons 0 1.5)
                    (make-fontsize-markup
                     -3
                     (number->string
                      (cadr (cadr timeSignatureToShow)))))))

                 (make-hspace-markup -1.5)

                 (make-override-markup
                  (cons 'alignment 0)
                  (make-translate-markup
                   (cons 0 0.8)
                   (make-draw-line-markup
                    (cons 1.5 1.35))))

                 (make-hspace-markup -1.5)

                 (make-number-markup
                  (make-left-align-markup
                   (make-fontsize-markup
                    -3
                    (number->string
                     (caddr (cadr timeSignatureToShow))))))))

               (make-number-markup
                (number->string
                 (cadddr (cadr timeSignatureToShow)))))))))

     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")
     #:translate
     (cons 0 -0.5)
     (#:bold "+")
     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")

     #:override
     (cons 'baseline-skip 0)

     (cond ((= (length (caddr timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (caddr timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (caddr timeSignatureToShow)))))))

           ((= (length (caddr timeSignatureToShow)) 3)
            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (make-right-align-markup
                   (make-translate-markup
                    (cons 0 1.6)
                    (make-fontsize-markup
                     -3
                     (number->string
                      (car (caddr timeSignatureToShow)))))))

                 (make-hspace-markup -1.5)

                 (make-override-markup
                  (cons 'alignment 0)
                  (make-translate-markup
                   (cons 0 0.8)
                   (make-draw-line-markup (cons 1.5 1.35))))

                 (make-hspace-markup -1.5)

                 (make-translate-markup
                  (cons 0 0)
                  (make-fontsize-markup
                   -3
                   (make-number-markup
                    (number->string
                     (cadr (caddr timeSignatureToShow))))))))

               (make-number-markup
                (number->string
                 (caddr (caddr timeSignatureToShow))))))))


           ((= (length (caddr timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (number->string
                   (car (caddr timeSignatureToShow))))
                 (make-fontsize-markup
                  -12
                  (make-simple-markup " "))

                 (make-hspace-markup -1.25)
                 (make-translate-markup
                  (cons 0 0.4)
                  (make-bold-markup
                   (make-simple-markup "+")))

                 (make-hspace-markup -0.25)

                 (make-hspace-markup -0.5)
                 (make-right-align-markup
                  (make-number-markup
                   (make-translate-markup
                    (cons 0 1.5)
                    (make-fontsize-markup
                     -3
                     (number->string
                      (cadr (caddr timeSignatureToShow)))))))

                 (make-hspace-markup -1.5)

                 (make-override-markup
                  (cons 'alignment 0)
                  (make-translate-markup
                   (cons 0 0.8)
                   (make-draw-line-markup
                    (cons 1.5 1.35))))

                 (make-hspace-markup -1.5)

                 (make-number-markup
                  (make-left-align-markup
                   (make-fontsize-markup
                    -3
                    (number->string
                     (caddr (caddr timeSignatureToShow))))))))

               (make-number-markup
                (number->string
                 (cadddr (caddr timeSignatureToShow)))))))))
     )

    ))

  #{
   \time $underlyingMeter
   \set beatStructure = $beatStructure

   \override Timing.TimeSignature.stencil =
   #ly:text-interface::print
   \override Timing.TimeSignature.text =
   #mkup
  #})

backToNormalTimeSignature =
{
 \unset beatStructure
 \revert Timing.TimeSignature.stencil
 \revert Timing.TimeSignature.text
 \revert Staff.TimeSignature.stencil
 \revert Staff.TimeSignature.text
}

{

 \compoundFractionalTimeSignatureBThree #'((3 4)(4 5 4)(2 3 4)) 67/60 3,3,3,4,2
 \tuplet 3/2 {c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c'[ c' c']}
 \incompleteTupletBracket \tuplet 5/4 {c'16[ c' c' c']}
 \incompleteTupletBracket \tuplet 3/2 {c'8 c'}
 \backToNormalTimeSignature
 \time 3/4
 c'2.

}
\end{Verbatim}


\subsection{Discussion}
See \hyperref[sec:compoundfractionalmeter_discussion_two]{\textbf{Discussion}} of the entry \textit{Compound Meter with Three Fractional Time Signatures, Style A.}


\hyperref[sec:toc]{\textbf{Table of Contents}}

\vfill \break

%%%%%%%%%%%%%%%%%%%







\section {Compound Meter with Three Fractional Time Signatures, Style C}

\hfill
\lilypondfile[staffsize=24,hpadding=4,voffset=4pt]{/compoundFractionalTimeSignatureCThree.ly}
\hfill

\subsection{Description}
This is an implementation of a compound meter with three fractional time signatures with Style C.  

\subsection{Grammar}
\begin{verbatim}
\compoundFractionalTimeSignatureCThree
       #'((TIME_SIG1)(TIME_SIG2)(TIME_SIG3)) MEASURE_SPAN BEAT_STRUCT

\backToNormalTimeSignature

\end{verbatim}
\textbf{NB}
\begin{enumerate}
\item See \hyperref[sec:compoundfractionalmeter_grammar]{\textbf{Grammar}} of the entry \textit{Compound Meter with Three Fractional Time Signatures, Style A.}
\item When you wish to go back to a regular time signature, use \verb|\backToNormalTimeSignature|, otherwise the identical fractional time signature will keep showing up.
\end{enumerate}

\subsection{Code}
\begin{Verbatim}[numbers=left,xleftmargin=5mm]
\version "2.24.4"
\language "english"


% Revised Jan 2 2025 for improving the appearance of fractions
% Revised Aug 10 2025 to include the function to revert to a
% regular time signature

suppressWarning =
#(define-void-function (amount message)(number? string?)
  (for-each
   (lambda (warning)
    (ly:expect-warning message))
   (iota amount 1 1)))

\suppressWarning 1 "strange time signature found"

incompleteTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t

}
incompleteSmallTupletBracket =  {
 \once \override Voice.TupletBracket.edge-height = #'(0.7 . 0)
 \once \override Voice.TupletBracket.bracket-visibility = ##t
 \once \override Voice.TupletNumber.X-offset =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       2.2
       1.2))

 \once \override Voice.TupletBracket.shorten-pair =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(-0.7 . 0.15)
       '(-0.3 . 0.8)))
 \once \override Voice.TupletBracket.X-positions =
 #(lambda (grob)
   (if (= UP (ly:grob-property grob 'direction))
       '(1.8 . 3)
       '(0.3 . 2.7)))
}

compoundFractionalTimeSignatureCThree =
#(define-music-function
  (timeSignatureToShow underlyingMeter beatStructure)
  (list? fraction? number-list?)
  (define mkup
   (markup
    #:concat
    (

     #:override
     (cons 'baseline-skip 0)
     (cond ((= (length (car timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (car timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (car timeSignatureToShow)))))))

           ((= (length (car timeSignatureToShow)) 3)
            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list

                 (make-right-align-markup
                  (make-number-markup
                   (number->string
                    (car (car timeSignatureToShow)))))

                 (make-hspace-markup -0.6)

                 (make-override-markup
                  (list (cons 'alignment 0)
                        (cons 'thickness 2))
                  (make-draw-line-markup
                   (cons 0.5 2)))

                 (make-hspace-markup -0.6)

                 (make-number-markup
                  (make-left-align-markup
                   (number->string
                    (cadr (car timeSignatureToShow)))))))

               (make-number-markup
                (number->string
                 (caddr (car timeSignatureToShow))))))))


           ((= (length (car timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (number->string
                   (car (car timeSignatureToShow))))
                 (make-fontsize-markup
                  -12
                  (make-simple-markup " "))


                 (make-hspace-markup -1.25)
                 (make-translate-markup
                  (cons 0 0.4)
                  (make-bold-markup
                   (make-simple-markup "+")))

                 (make-hspace-markup -0.25)

                 (make-hspace-markup -0.5)
                 (make-right-align-markup
                  (make-number-markup
                   (number->string
                    (cadr (car timeSignatureToShow)))))

                 (make-hspace-markup -0.6)

                 (make-override-markup
                  (list (cons 'alignment 0)
                        (cons 'thickness 2))
                  (make-draw-line-markup (cons 0.5 2)))

                 (make-hspace-markup -0.6)

                 (make-number-markup
                  (make-left-align-markup
                   (number->string
                    (caddr (car timeSignatureToShow)))))))

               (make-number-markup
                (number->string
                 (cadddr (car timeSignatureToShow)))))))))


     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")
     #:translate
     (cons 0 -0.5)
     (#:bold "+")
     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")

     #:override
     (cons 'baseline-skip 0)

     (cond ((= (length (cadr timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (cadr timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (cadr timeSignatureToShow)))))))

           ((= (length (cadr timeSignatureToShow)) 3)
            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list

                 (make-right-align-markup
                  (make-number-markup
                   (number->string
                    (car (cadr timeSignatureToShow)))))

                 (make-hspace-markup -0.6)

                 (make-override-markup
                  (list (cons 'alignment 0)
                        (cons 'thickness 2))
                  (make-draw-line-markup
                   (cons 0.5 2)))

                 (make-hspace-markup -0.6)

                 (make-number-markup
                  (make-left-align-markup
                   (number->string
                    (cadr (cadr timeSignatureToShow)))))))

               (make-number-markup
                (number->string
                 (caddr (cadr timeSignatureToShow))))))))


           ((= (length (cadr timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (number->string
                   (car (cadr timeSignatureToShow))))
                 (make-fontsize-markup
                  -12
                  (make-simple-markup " "))


                 (make-hspace-markup -1.25)
                 (make-translate-markup
                  (cons 0 0.4)
                  (make-bold-markup
                   (make-simple-markup "+")))

                 (make-hspace-markup -0.25)

                 (make-hspace-markup -0.5)
                 (make-right-align-markup
                  (make-number-markup
                   (number->string
                    (cadr (cadr timeSignatureToShow)))))

                 (make-hspace-markup -0.6)

                 (make-override-markup
                  (list (cons 'alignment 0)
                        (cons 'thickness 2))
                  (make-draw-line-markup (cons 0.5 2)))

                 (make-hspace-markup -0.6)

                 (make-number-markup
                  (make-left-align-markup
                   (number->string
                    (caddr (cadr timeSignatureToShow)))))))

               (make-number-markup
                (number->string
                 (cadddr (cadr timeSignatureToShow)))))))))

     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")
     #:translate
     (cons 0 -0.5)
     (#:bold "+")
     #:translate
     (cons 0 -0.5)
     (#:fontsize -12 " ")

     #:override
     (cons 'baseline-skip 0)

     (cond ((= (length (caddr timeSignatureToShow)) 2)
            (make-center-column-markup
             (list (make-number-markup
                    (number->string
                     (car (caddr timeSignatureToShow))))
                   (make-number-markup
                    (number->string
                     (cadr (caddr timeSignatureToShow)))))))

           ((= (length (caddr timeSignatureToShow)) 3)
            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list

                 (make-right-align-markup
                  (make-number-markup
                   (number->string
                    (car (caddr timeSignatureToShow)))))

                 (make-hspace-markup -0.6)

                 (make-override-markup
                  (list (cons 'alignment 0)
                        (cons 'thickness 2))
                  (make-draw-line-markup
                   (cons 0.5 2)))

                 (make-hspace-markup -0.6)

                 (make-number-markup
                  (make-left-align-markup
                   (number->string
                    (cadr (caddr timeSignatureToShow)))))))

               (make-number-markup
                (number->string
                 (caddr (caddr timeSignatureToShow))))))))


           ((= (length (caddr timeSignatureToShow)) 4)

            (make-override-markup
             (cons 'baseline-skip 0)
             (make-center-column-markup
              (list
               (make-line-markup
                (list
                 (make-number-markup
                  (number->string
                   (car (caddr timeSignatureToShow))))
                 (make-fontsize-markup
                  -12
                  (make-simple-markup " "))


                 (make-hspace-markup -1.25)
                 (make-translate-markup
                  (cons 0 0.4)
                  (make-bold-markup
                   (make-simple-markup "+")))

                 (make-hspace-markup -0.25)

                 (make-hspace-markup -0.5)
                 (make-right-align-markup
                  (make-number-markup
                   (number->string
                    (cadr (caddr timeSignatureToShow)))))

                 (make-hspace-markup -0.6)

                 (make-override-markup
                  (list (cons 'alignment 0)
                        (cons 'thickness 2))
                  (make-draw-line-markup (cons 0.5 2)))

                 (make-hspace-markup -0.6)

                 (make-number-markup
                  (make-left-align-markup
                   (number->string
                    (caddr (caddr timeSignatureToShow)))))))

               (make-number-markup
                (number->string
                 (cadddr (caddr timeSignatureToShow)))))))))
     )
    ))

  #{
   \time $underlyingMeter
   \set beatStructure = $beatStructure

   \override Timing.TimeSignature.stencil =
   #ly:text-interface::print
   \override Timing.TimeSignature.text =
   #mkup
  #})

backToNormalTimeSignature =
{
 \unset beatStructure
 \revert Timing.TimeSignature.stencil
 \revert Timing.TimeSignature.text
 \revert Staff.TimeSignature.stencil
 \revert Staff.TimeSignature.text
}


{

 \compoundFractionalTimeSignatureCThree #'((3 4)(4 5 4)(2 3 4)) 67/60 3,3,3,4,2
 \tuplet 3/2 {c'8 c' c'} \tuplet 3/2 {c' c' c'}
 \tuplet 3/2 {c'[ c' c']}
 \incompleteTupletBracket \tuplet 5/4 {c'16[ c' c' c']}
 \incompleteTupletBracket \tuplet 3/2 {c'8 c'}
 \backToNormalTimeSignature
 \time 3/4
 c'2.
}

\end{Verbatim}


\subsection{Discussion}
See \hyperref[sec:compoundfractionalmeter_discussion_two]{\textbf{Discussion}} of the entry \textit{Compound Meter with Three Fractional Time Signatures, Style A.}


\hyperref[sec:toc]{\textbf{Table of Contents}}

\vfill \break

%%%%%%%%%%%%%%%%%%%




\section {Time Signature with Decimals}

\hfill
\lilypondfile[staffsize=24,hpadding=4,voffset=4pt]{/decimalPointTimeSignature.ly}
\hfill

\subsection{Description}
This is an implementation of a time signature with decimals. This function allows the user to use decimals for both numerator and denominator values of the time signature. While there are many examples where the numerator value contains decimals, notable examples for denominators that contain decimals include works by Mark Andre, such as \textit{Un-fini I} (1995) for harp,\autocite{RN1755} \textit{Un-fini II} (1994-95) for harpsichord,\autocite{RN1754} and \textit{Contrapunctus} (1998/99) for piano.\autocite{RN1753}. This function also has the option of showing ellipsis, as discussed in \textbf{Grammar}. 
\subsection{Grammar}
\begin{verbatim}
\decimalPointTimeSignature
       #'((NUMERATOR)(DENOMINATOR)) MEASURE_SPAN BEAT_STRUCT

\backToNormalTimeSignature

\end{verbatim}
\textbf{NB}
\begin{enumerate}
\item The first argument takes a list of two lists. For both \verb|NUMERATOR| and \verb|DENOMINATOR|, one or two numbers can be placed.
\begin{enumerate}
\item If only one number is placed, it is treated as an integer. For example, \verb|#'((3)(4))| would print: \(\frac{3}{4}\).
\item If two numbers are placed, the first number is the integer portion of the number, and the second number is the decimals. For example, \verb|#'((3 5)(4 232))| would print: \(\frac{3.5}{4.232}\). 
\item Placing a dot \verb|.| at the end of the second number will print the ellipsis \verb|...| at the end. This is useful for notating infinite decimal representations. For example, \verb|#'((3 14159.)(4))| would print: \(\frac{3.14159...}{4}\).
\end{enumerate}
\item \verb|MEASURE_SPAN| denotes how the measure may be written without the use of "decimal point" time signature. 
\item \verb |BEAT_STRUCT| indicates beat structure, by which the beaming of the measure abides.
\item When you wish to go back to a regular time signature, use \verb|\backToNormalTimeSignature|, otherwise the identical fractional time signature will keep showing up.
\end{enumerate}

\subsection{Code}
\begin{Verbatim}[numbers=left,xleftmargin=5mm]
\version "2.24.4"
\language "english"

decimalPointTimeSignature =
#(define-music-function
  (timeSignatureToShow underlyingMeter beatStructure)
  (list? fraction? number-list?)

  (define (is-float? x)
   (and (number? x) (inexact? x)))

  #{
   \time $underlyingMeter
   \set beatStructure = $beatStructure
   \override Staff.TimeSignature.stencil =
   #ly:text-interface::print
   \override Staff.TimeSignature.text =
   #(markup
     (make-override-markup
      (cons 'baseline-skip 0)
      (make-center-column-markup
       (list
        (if (= (length (car  timeSignatureToShow)) 1)
            (make-number-markup
             (number->string

              (car (car timeSignatureToShow))))
            (make-line-markup
             (list
              (make-number-markup
               (number->string
                (car (car timeSignatureToShow))))
              (make-hspace-markup -0.5)
              (make-translate-markup
               '(0 . 0.15)
               (make-musicglyph-markup "period"))
              (make-hspace-markup -0.5)
              (if (not (is-float? (cadr (car timeSignatureToShow))))
                  (make-number-markup
                   (number->string
                    (inexact->exact (cadr (car timeSignatureToShow)))
                    ))
                  (make-line-markup
                   (list (make-number-markup
                          (number->string
                           (inexact->exact
                            (cadr (car timeSignatureToShow)))
                           ))
                         (make-hspace-markup -0.5)
                         (make-translate-markup
                          '(0 . 0.15)
                          (make-musicglyph-markup "period"))
                         (make-hspace-markup -0.5)
                         (make-translate-markup
                          '(0 . 0.15)
                          (make-musicglyph-markup "period"))
                         (make-hspace-markup -0.5)
                         (make-translate-markup
                          '(0 . 0.15)
                          (make-musicglyph-markup "period"))))
                  )
              )
             )
            )
        (if (= (length (cadr  timeSignatureToShow)) 1)
            (make-number-markup
             (number->string
              (car (cadr timeSignatureToShow))))
            (make-line-markup
             (list
              (make-number-markup
               (number->string
                (car (cadr timeSignatureToShow))))
              (make-hspace-markup -0.5)
              (make-translate-markup
               '(0 . 0.15)
               (make-musicglyph-markup "period"))
              (make-hspace-markup -0.5)
              (if (not (is-float? (cadr (cadr timeSignatureToShow))))
                  (make-number-markup
                   (number->string
                    (inexact->exact (cadr (cadr timeSignatureToShow)))
                    ))
                  (make-line-markup
                   (list (make-number-markup
                          (number->string
                           (inexact->exact
                            (cadr (cadr timeSignatureToShow)))
                           ))
                         (make-hspace-markup -0.5)
                         (make-translate-markup
                          '(0 . 0.15)
                          (make-musicglyph-markup "period"))
                         (make-hspace-markup -0.5)
                         (make-translate-markup
                          '(0 . 0.15)
                          (make-musicglyph-markup "period"))
                         (make-hspace-markup -0.5)
                         (make-translate-markup
                          '(0 . 0.15)
                          (make-musicglyph-markup "period"))))
                  )
              )
             )
            )
        )
       ))
     (make-hspace-markup -1))
  #})

backToNormalTimeSignature =
{
 \unset beatStructure
 \revert Timing.TimeSignature.stencil
 \revert Timing.TimeSignature.text
 \revert Staff.TimeSignature.stencil
 \revert Staff.TimeSignature.text
}


{
 \decimalPointTimeSignature #'((2 5)(4)) 5/8 2,3
 c'8 c' c' c' c'
 \backToNormalTimeSignature
 \time 3/4
 c'2.
}


{
 \decimalPointTimeSignature #'((9)(3 1415.)) 9/4 3,3,3
 \tuplet 9/9 {c'4 4 4 4 4 4 4 4 4}
 \backToNormalTimeSignature
 \time 3/4
 c'2.
}

\end{Verbatim}

\subsection{Discussion}
The structure of the code where the user specifies integer and decimal portions of either numerator, denominator, or both, resulted from the fact that the period "." by default appeared too close to the staff line and the denominator, possibly rendering the time signature difficult to read. In the code I made these periods appear via \verb|\translate| feature, where I offset the period upward by the value of 0.15, allowing the period sign to be separated  from the staff line and the denominator. 


\hyperref[sec:toc]{\textbf{Table of Contents}}

\vfill \break

%%%%%%%%%%%%%%%%%%%
